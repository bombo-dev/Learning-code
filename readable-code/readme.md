# 읽기 좋은 코드를 작성하는 사고법

## 우리는 왜 클린 코드를 추구하는가
클린 코드를 추구하는 가장 큰 이유는 **가독성** 때문이다.  
혼자 프로젝트를 진행할 때와 달리 **회사에서 코드를 작성할 때는 다른 사람의 코드를 보는 경우가 더 많다.**  
또한, 내가 작성한 코드를 다른 사람이 읽고 수정해야 하는 상황도 자주 발생한다.  

이러한 상황에서 가독성이 떨어지는 코드라면, 코드를 이해하기 위해 여러 메서드를 여기저기 찾아보게 되고, 심지어는 머리로 다 이해하기 어려워서 노트에 기록을 해야 하는 경우도 생긴다.

## 추상과 구체

### 추상
'추상(抽象)'은 개별적인 사물이나 구체적인 개념에서 공통적인 요소를 추출하여 일반적인 개념으로 파악하는 것을 의미한다.  
즉, 여러 구체적인 개념 중 특정한 측면만을 **선별하여** 포착하는 것이다. 이는 결국 **다른 측면은 배제한다**는 것과 같다.  
> 중요한 정보는 남기고, 덜 중요한 정보는 생략한다.

컴퓨터 공학적인 관점에서 예를 들어보자.  
컴퓨터는 0과 1로 구성된 비트(bit) 단위로 동작한다. 하지만 우리가 코드를 작성할 때는 자료형(Data Type)을 사용한다.  
이것은 어떻게 가능한 것일까?

우리는 내부적으로 어떻게 구현되어 있는지 알지 못하지만, 일반적으로 char(1Byte), int(4Byte)처럼 비트 단위로 데이터를 처리한다고 추측할 수 있다.  
만약 우리가 매번 `10010001`, `11000001`, `11001010`, `00101001` 같은 비트 수준에서 개발해야 한다면 너무 복잡할 것이다.  
우리가 자연스럽게 사용하는 자료형 역시 **추상화**의 결과물이다.

또 다른 예를 들어보자.  
프로그래밍 언어를 배울 때, 고수준 언어와 저수준 언어에 대해 배우게 된다.  
처음에는 고수준 언어가 "수준 높은 언어"이고, 저수준 언어가 "수준 낮은 언어"라고 오해할 수 있다.  
그러나 이는 추상화 수준에 따른 분류이다.

- **고수준 언어**: 추상화 레벨이 높은 언어
- **저수준 언어**: 추상화 레벨이 낮은 언어, 즉 구체에 가까운 언어

> 적절한 추상화는 복잡한 데이터와 로직을 단순화하여 이해하기 쉽게 만든다. 이는 곧 가독성이 좋다는 의미이다.  
> **도메인의 문맥 안에서 중요한 핵심 개념만 남겨 표현하는 것**이 바로 추상화이다.

## 이름 짓기

이름을 짓는다는 것은 가장 기본적인 추상화 방식이다. 이름을 통해서 다음과 같은 내용을 만족해야 하기 때문이다.
- 표현하고자 하는 **구체에서 정말 중요한 핵심 개념만을 추출**하여 잘 드러내야 한다.
- **도메인의 문맥 안에서 이해되는 용어**여야 한다.

이름을 지을 때는 다음과 같은 규칙을 따르는 것이 좋다.
- **단수와 복수를 구분**하기
- **이름 줄이지 않기**
- **은어/방언 사용하지 않기**
- **좋은 코드를 보고 습득**하기

### 단수와 복수를 구분하기
끝에 `-(e)s` 를 붙여 어떤 데이터가 단수인지, 복수인지 나타내는 것만으로도 중요한 정보를 같이 전달 할 수 있다.
```java
// 타입을 알 수 없어도 collection 형태의 복수형임을 알 수 있음.
var files = fileRepository.findAll();

var iterator = files.iterator()
while (iterator.hasNext()) {
   print(iterator.next());
}
// 만약 단수였다면?

var file = fileRepository.findAll();
print(file) // [....] !?!?  
```

### 이름 줄이지 않기
때때로, 이름이 너무 길어서 가독성을 포기하고 이름을 줄이는 경우가 있다. 하지만, 이 행위는 결국 **가독성을 제물로 바쳐 효율성을 얻는 것이고 대체로 잃는 것이 더 많다.**

위와 같은 이유로 자제하는 것이 더 좋으나 관용어처럼 많은 사람들이 자주 사용하는 것은 사용해도 된다.
`column -> col`, `latitude -> lat`, `number -> num`

위와 같은 자주 사용되는 줄임말은 문맥 안에서 이해 할 수 있기 때문에 사용을 할 수 있다.
```java
class Foo {
  private int num; // 어떤 것을 의미하는지 알 수 없다.
}

class OrderPriority {
  private int num; // 정렬의 우선 순위.
}
```

### 은어/방언 사용하지 않기
농담에서 파생된 용어, 일부 팀원/현재의 우리 팀만 아는 용어는 사용하지 않는다.  
- 용어는 **새로운 사람이 팀에 합류했을 때 이 용어를 단번에 이해** 할 수 있어야 한다.

때로는 어떠한 용어에 따라서 도메인 용어를 회사마다 달리 사용 할 수는 있으므로 도메인 용어 사전을 만들어야 할 수도 있다.  
`매장 -> Store`, `매장 -> Market` 이렇게 달라 질 수 있기 때문이다.

### 좋은 코드를 보고 습득하기
비슷한 상황에서 자주 사용하는 단어, 개념을 습득하기
`pool`, `invoke`, `candidate`, `threshold` 등등....

## 메서드와 추상화
> 잘 쓰여진 코드라면, **한 메서드의 주제는 반드시 하나**다.  

이는 잘 쓰여진 글이라면, **한 문단의 주제는 반드시 하나**다. 와 일맥 상통한다.

우리는 다음과 같이 메서드를 짓는다.
```java
void attack(Enemy enemy)
```

해당 메서드에는 공격을 한다. 라는 주제만 있어야 한다.  
만약에 메서드 내부에 적의 공격을 한 순간 방어하고 공격을 한다. 라는 의미를 담고 있다면 이는 메서드를 분리하거나 달리 지어야한다.  
한 문단에 두 개의 주제가 있기 때문이다.

```java
void parring(Enemy enemy)
```
라는 것을 만들 것이다.

이렇듯 메서드는 **메서드의 이름으로 내부의 구현을 추상화** 할 수 있다. 
